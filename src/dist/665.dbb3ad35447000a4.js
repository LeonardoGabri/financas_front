"use strict";(self.webpackChunkfront_financas=self.webpackChunkfront_financas||[]).push([[665],{4665:(N,h,s)=>{s.r(h),s.d(h,{SubgrupoFormModule:()=>Z});var g=s(6895),n=s(433),l=s(8654),u=s(4229),p=s(1886),d=s(1147),m=s(1210),e=s(4650),f=s(1481),b=s(8229),v=s(4004),S=s(9809);let F=(()=>{class i{getFilteredData(t,o){return this.grupoApiService.buscarGrupos().pipe((0,v.U)(a=>a?a.content.map(c=>({label:c.nome,value:c.id})):[]))}getObjectByValue(t){return this.grupoApiService.buscarGrupoPorId(t).pipe((0,v.U)(o=>{const r=o||null;return{label:r.nome,value:r.id||void 0}}))}constructor(t){this.grupoApiService=t}static#e=this.\u0275fac=function(o){return new(o||i)(e.LFG(S.h))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const A=[{path:"",component:(()=>{class i{constructor(t,o,r,a,c,C,y,J){this.formBuilder=t,this.route=o,this.router=r,this.poDialogService=a,this.poNotification=c,this.titleService=C,this.subgrupoApiService=y,this.grupoComboService=J,this.nomePrincipal=p.yj.label,this.navegacao={items:[{label:this.nomePrincipal,action:this.verificarFormulario.bind(this)}]}}ngOnInit(){this.criarFormulario(),this.route.params.subscribe(t=>{t&&t.id?(this.nomePagina=(0,m.$d)(t.id).label,this.subgrupoApiService.buscarSubgrupoPorId(t.id).subscribe({next:o=>{o&&(this.nomePagina=(0,m.$d)(t.id).label,this.formulario.patchValue(o))},error:({error:o})=>{this.poNotification.error(o?.title?o.title:"Erro no servidor"),console.error(o)},complete:()=>{this.navegacao.items.push({label:this.nomePagina}),this.titleService.setTitle(`${this.nomePagina} - Motor Fiscal`)}})):(this.nomePagina=m.cj.label,this.navegacao.items.push({label:this.nomePagina}),this.titleService.setTitle(`${this.nomePagina} - Motor Fiscal`))})}criarFormulario(t){this.formulario=this.formBuilder.group({id:[t?.id],nome:[t?.nome],grupoId:[t?.grupoId],descricao:[t?.descricao]})}verificarFormulario(t,o=[p.yj.link],r=this.formulario){(0,d.TR)(o,r,this.router,this.poDialogService)}cancelar(){this.verificarFormulario()}salvar(){if(this.formulario.markAsPristine(),this.formulario.valid){let t=this.formulario.getRawValue(),o=t.id;delete t.id,(o?this.subgrupoApiService.editarSubgrupo(o,t):this.subgrupoApiService.salvarSubgrupo(t)).subscribe({next:a=>{a&&(this.poNotification.success("Salvo com sucesso"),this.router.navigate([p.yj.link]))},error:({error:a})=>{let c={message:a?.title?a.title:"Erro no servidor",action:()=>{},actionLabel:""};a?.detail&&(c.action=()=>{this.poDialogService.alert({title:a?.title,message:a?.detail,ok:()=>!0})},c.actionLabel="Detalhes"),this.poNotification.error(c),console.error(a)}})}else(0,d.DD)(this.formulario),this.poNotification.error("Erro no formul\xe1rio")}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(n.qu),e.Y36(u.gz),e.Y36(u.F0),e.Y36(l.Aw7),e.Y36(l.fRI),e.Y36(f.Dx),e.Y36(b.r),e.Y36(F))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-subsubgrupo-form"]],decls:12,vars:6,consts:[[3,"p-title","p-breadcrumb","p-cancel","p-save"],[3,"formGroup"],[1,"po-row"],["formControlName","nome","p-label","Nome","p-clean","true","p-required","true",1,"po-md-12"],["formControlName","grupoId","p-label","Grupo",1,"po-md-12",3,"p-clean","p-filter-service","p-required"],["formControlName","descricao","p-label","Descri\xe7\xe3o",1,"po-md-12"]],template:function(o,r){1&o&&(e.TgZ(0,"po-page-edit",0),e.NdJ("p-cancel",function(){return r.cancelar()})("p-save",function(){return r.salvar()}),e.TgZ(1,"po-container")(2,"form",1)(3,"div",2),e._UZ(4,"po-input",3),e.qZA(),e.TgZ(5,"div",2),e._UZ(6,"po-combo",4),e.qZA(),e.TgZ(7,"div",2),e._UZ(8,"po-textarea",5),e.qZA()(),e._UZ(9,"br")(10,"br")(11,"br"),e.qZA()()),2&o&&(e.Q6J("p-title",r.nomePagina)("p-breadcrumb",r.navegacao),e.xp6(2),e.Q6J("formGroup",r.formulario),e.xp6(4),e.Q6J("p-clean",!0)("p-filter-service",r.grupoComboService)("p-required",!0))},dependencies:[l.PJf,l.ZZR,l.xxV,l.gJm,l.k4n,n._Y,n.JJ,n.JL,n.sg,n.u],encapsulation:2})}return i})()}];let P=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(A),u.Bz]})}return i})(),Z=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[g.ez,l.JBz,n.UX,n.u5,P]})}return i})()}}]);