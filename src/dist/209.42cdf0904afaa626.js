"use strict";(self.webpackChunkfront_financas=self.webpackChunkfront_financas||[]).push([[209],{3209:(y,u,o)=>{o.r(u),o.d(u,{GrupoListaModule:()=>D});var c=o(6895),h=o(433),p=o(8654),l=o(4229),m=o(790);const d=[{property:"nome",label:"Grupo"}];var n=o(5801),a=o(4650),g=o(1481),G=o(9809);const f=["tabelaListaGrupo"],v=["paginaListaGrupo"],b=[{path:"",component:(()=>{class t{constructor(i,s,r,e,C){this.router=i,this.titleService=s,this.poNotification=r,this.grupoApiService=e,this.poDialog=C,this.nomePagina=n.RS.label,this.colunasTabelaGrupo=d,this.disclaimers=new Array,this.carregandoTabelaGrupo=!1,this.carregandoDadosGrupo=!1,this.desabilitarCarregarMais=!1,this.acoes=[{label:`Novo ${this.nomePagina}`,action:this.novaGrupo.bind(this),icon:"po-icon-plus"}],this.paginacao={page:0},this.grupoListaFilter={action:this.buscar.bind(this),placeholder:"Pesquisar C\xf3digo ou Descri\xe7\xe3o",width:4},this.grupoListaDisclaimer={title:"Filtros",disclaimers:[],remove:this.removerDisclaimer.bind(this),removeAll:this.removerTodosDisclaimer.bind(this)},this.grupoListaAcoes=(0,m.L)(this.editarGrupo.bind(this),this.removerGrupoDialog.bind(this))}ngOnInit(){this.buscarNovosDados(this.filtroGrupo)}ngAfterViewInit(){this.titleService.setTitle(`${this.nomePagina}`)}novaGrupo(){this.router.navigate([n.Nl.link])}buscar(i){this.carregandoTabelaGrupo=!0,this.filtroLista=i,this.limparItensGrupos(),this.popularDisclaimers(this.filtroGrupo,this.filtroLista),this.buscarNovosDados(this.filtroGrupo),this.carregandoTabelaGrupo=!1}buscarNovosDados(i){this.limparItensGrupos(),this.buscarMaisDados(i)}buscarMaisDados(i){this.filtroGrupo=i,this.popularDisclaimers(this.filtroGrupo,this.filtroLista);const s=this.criarParametroGrupo(this.filtroGrupo,this.filtroLista);this.carregandoTabelaGrupo=!0,this.grupoApiService.buscarGrupos(s,this.paginacao.page).subscribe({next:r=>{this.tabelaListaGrupo.sortColumn({}),this.listaGrupos=this.listaGrupos?[...this.listaGrupos,...r.content]:[...r.content],this.desabilitarCarregarMais=r.last},error:({error:r})=>{this.limparItensGrupos(),this.poNotification.error(r?.title?r.title:"Erro no servidor"),console.error(r)},complete:()=>{this.carregandoTabelaGrupo=!1}})}popularDisclaimers(i,s){this.disclaimers=[],s&&this.disclaimers.push(this.processaFiltroLista(s)),i&&this.disclaimers.push(...this.processaFiltroGrupoAvancado(i)),this.grupoListaDisclaimer.disclaimers=this.disclaimers&&this.disclaimers.length>0?[...this.disclaimers]:[]}processaFiltroLista(i){return{label:"Pesquisar: "+i,value:i,property:"filtroLista"}}processaFiltroGrupoAvancado(i){return Object.entries(i).filter(s=>Array.isArray(s[1]?.value)?!!s[1].value.length:s[1]?.value).map(s=>({label:s[1].fLabel(s[1]),value:s,property:s[1].property,hideClose:s[1].hideClose}))}criarParametroGrupo(i,s){if(i||s)return{nome:i?.nome?.value,pesquisar:s}}limparItensGrupos(){this.paginacao.page=0,this.listaGrupos=[],this.desabilitarCarregarMais=!0}removerDisclaimer(i){"filtroLista"===i.removedDisclaimer.property&&(this.paginaListaGrupo.clearInputSearch(),this.buscar(""))}removerTodosDisclaimer(i){this.paginaListaGrupo.clearInputSearch(),this.buscar("")}editarGrupo(i){this.router.navigate([(0,n.km)(i.id).link])}removerGrupoDialog(i){this.poDialog.confirm({title:"Aten\xe7\xe3o",message:`Tem certeza que deseja remover a grupo?\n      <br>\n      <br> <b>C\xf3digo</b>: ${i.nome||""}`,confirm:()=>this.removerGrupo(i)})}removerGrupo(i){this.carregandoTabelaGrupo=!0,this.grupoApiService.deletarGrupo(i.id).subscribe({next:()=>{this.buscarNovosDados(this.filtroGrupo),this.poNotification.success("Removido com sucesso")},error:({error:s})=>{this.poNotification.error(s?.detail?s.detail:"Erro no servidor"),console.error(s)},complete:()=>{this.carregandoTabelaGrupo=!1}})}mostrarMaisGrupos(){this.tabelaListaGrupo.sortColumn({}),this.carregandoDadosGrupo=!0,this.paginacao.page++,this.carregandoDadosGrupo=!1}static#s=this.\u0275fac=function(s){return new(s||t)(a.Y36(l.F0),a.Y36(g.Dx),a.Y36(p.fRI),a.Y36(G.h),a.Y36(p.Aw7))};static#i=this.\u0275cmp=a.Xpm({type:t,selectors:[["app-grupo-lista"]],viewQuery:function(s,r){if(1&s&&(a.Gf(f,7),a.Gf(v,7)),2&s){let e;a.iGM(e=a.CRH())&&(r.tabelaListaGrupo=e.first),a.iGM(e=a.CRH())&&(r.paginaListaGrupo=e.first)}},inputs:{listaGrupos:"listaGrupos"},decls:5,vars:13,consts:[[3,"p-actions","p-title","p-filter","p-disclaimer-group"],["paginaListaGrupo",""],[2,"width","100%"],[2,"width","100%",3,"p-actions","p-sort","p-striped","p-loading","p-loading-show-more","p-show-more-disabled","p-items","p-columns","p-actions-right","p-show-more"],["tabelaListaGrupo",""]],template:function(s,r){1&s&&(a.TgZ(0,"po-page-list",0,1)(2,"po-container",2)(3,"po-table",3,4),a.NdJ("p-show-more",function(){return r.mostrarMaisGrupos()}),a.qZA()()()),2&s&&(a.Q6J("p-actions",r.acoes)("p-title",r.nomePagina)("p-filter",r.grupoListaFilter)("p-disclaimer-group",r.grupoListaDisclaimer),a.xp6(3),a.Q6J("p-actions",r.grupoListaAcoes)("p-sort",!0)("p-striped",!0)("p-loading",r.carregandoTabelaGrupo)("p-loading-show-more",r.carregandoDadosGrupo)("p-show-more-disabled",r.desabilitarCarregarMais)("p-items",r.listaGrupos)("p-columns",r.colunasTabelaGrupo)("p-actions-right",!0))},dependencies:[p.PJf,p.Ulp,p._w3],encapsulation:2})}return t})()}];let L=(()=>{class t{static#s=this.\u0275fac=function(s){return new(s||t)};static#i=this.\u0275mod=a.oAB({type:t});static#r=this.\u0275inj=a.cJS({imports:[l.Bz.forChild(b),l.Bz]})}return t})(),D=(()=>{class t{static#s=this.\u0275fac=function(s){return new(s||t)};static#i=this.\u0275mod=a.oAB({type:t});static#r=this.\u0275inj=a.cJS({imports:[c.ez,p.JBz,h.UX,L]})}return t})()}}]);