"use strict";(self.webpackChunkfront_financas=self.webpackChunkfront_financas||[]).push([[580],{5580:(T,v,s)=>{s.r(v),s.d(v,{BancoFormModule:()=>A});var b=s(6895),l=s(433),c=s(8654),p=s(4229),m=s(1886),u=s(1969),h=s(1147),e=s(4650),g=s(1481),d=s(2686),f=s(4004);let S=(()=>{class i{getFilteredData(t,o){return this.bancoApiService.listarBancosEnum().pipe((0,f.U)(a=>a?a.map(n=>({label:n.label,value:n.label})):[]))}getObjectByValue(t){return this.bancoApiService.listarBancosEnum().pipe((0,f.U)(o=>{const a=o.find(n=>n.value==t)||null;return{label:a.label,value:a.value||void 0}}))}constructor(t){this.bancoApiService=t}static#e=this.\u0275fac=function(o){return new(o||i)(e.LFG(d.S))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var B=s(2424);const C=[{path:"",component:(()=>{class i{constructor(t,o,r,a,n,N,Z,J,P){this.formBuilder=t,this.route=o,this.router=r,this.poDialogService=a,this.poNotification=n,this.titleService=N,this.bancoApiService=Z,this.bancoEnumComboService=J,this.responsavelComboService=P,this.nomePrincipal=m.c2.label,this.navegacao={items:[{label:this.nomePrincipal,action:this.verificarFormulario.bind(this)}]}}ngOnInit(){this.criarFormulario(),this.route.params.subscribe(t=>{t&&t.id?(this.nomePagina=(0,u.TY)(t.id).label,this.bancoApiService.buscarBancoPorId(t.id).subscribe({next:o=>{o&&(this.nomePagina=(0,u.TY)(t.id).label,this.formulario.patchValue(o))},error:({error:o})=>{this.poNotification.error(o?.title?o.title:"Erro no servidor"),console.error(o)},complete:()=>{this.navegacao.items.push({label:this.nomePagina}),this.titleService.setTitle(`${this.nomePagina}`)}})):(this.nomePagina=u.$p.label,this.navegacao.items.push({label:this.nomePagina}),this.titleService.setTitle(`${this.nomePagina}`))})}criarFormulario(t){this.formulario=this.formBuilder.group({id:[t?.id],ativo:[null==t?.ativo||t?.ativo],nome:[t?.nome],responsavel:[t?.responsavel],responsavelNome:[t?.responsavelNome],descricao:[t?.descricao]})}verificarFormulario(t,o=[m.c2.link],r=this.formulario){(0,h.TR)(o,r,this.router,this.poDialogService)}cancelar(){this.verificarFormulario()}salvar(){if(this.formulario.markAsPristine(),this.formulario.valid){let t=this.formulario.getRawValue(),o=t.id;delete t.id,(o?this.bancoApiService.editarBanco(o,t):this.bancoApiService.salvarBanco(t)).subscribe({next:a=>{a&&(this.poNotification.success("Salvo com sucesso"),this.router.navigate([m.c2.link]))},error:({error:a})=>{let n={message:a?.title?a.title:"Erro no servidor",action:()=>{},actionLabel:""};a?.detail&&(n.action=()=>{this.poDialogService.alert({title:a?.title,message:a?.detail,ok:()=>!0})},n.actionLabel="Detalhes"),this.poNotification.error(n),console.error(a)}})}else(0,h.DD)(this.formulario),this.poNotification.error("Erro no formul\xe1rio")}alteraResponsavel(t){this.formulario.get("responsavelNome")?.setValue(t.label)}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(l.qu),e.Y36(p.gz),e.Y36(p.F0),e.Y36(c.Aw7),e.Y36(c.fRI),e.Y36(g.Dx),e.Y36(d.S),e.Y36(S),e.Y36(B.G))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-banco-form"]],decls:14,vars:10,consts:[[3,"p-title","p-breadcrumb","p-cancel","p-save"],[3,"formGroup"],[1,"po-row"],["formControlName","nome","p-label","Nome",1,"po-md-10",3,"p-filter-service","p-clean","p-required"],[1,"po-md-2",2,"display","flex","flex-direction","row-reverse"],["formControlName","ativo","p-label","Situa\xe7\xe3o","p-label-on","Ativo","p-label-off","Inativo","p-required","true",2,"width","155px"],["formControlName","responsavel","p-label","Respons\xe1vel",1,"po-md-12",3,"p-filter-service","p-clean","p-required","p-emit-object-value","p-change"],["formControlName","descricao","p-label","Descri\xe7\xe3o",1,"po-md-12"]],template:function(o,r){1&o&&(e.TgZ(0,"po-page-edit",0),e.NdJ("p-cancel",function(){return r.cancelar()})("p-save",function(){return r.salvar()}),e.TgZ(1,"po-container")(2,"form",1)(3,"div",2),e._UZ(4,"po-combo",3),e.TgZ(5,"div",4),e._UZ(6,"po-switch",5),e.qZA()(),e.TgZ(7,"div",2)(8,"po-combo",6),e.NdJ("p-change",function(n){return r.alteraResponsavel(n)}),e.qZA()(),e.TgZ(9,"div",2),e._UZ(10,"po-textarea",7),e.qZA()(),e._UZ(11,"br")(12,"br")(13,"br"),e.qZA()()),2&o&&(e.Q6J("p-title",r.nomePagina)("p-breadcrumb",r.navegacao),e.xp6(2),e.Q6J("formGroup",r.formulario),e.xp6(2),e.Q6J("p-filter-service",r.bancoEnumComboService)("p-clean",!0)("p-required",!0),e.xp6(4),e.Q6J("p-filter-service",r.responsavelComboService)("p-clean",!0)("p-required",!0)("p-emit-object-value",!0))},dependencies:[c.PJf,c.ZZR,c.gJm,c.nrg,c.k4n,l._Y,l.JJ,l.JL,l.sg,l.u],encapsulation:2})}return i})()}];let F=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(C),p.Bz]})}return i})(),A=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[b.ez,c.JBz,l.UX,l.u5,F]})}return i})()}}]);