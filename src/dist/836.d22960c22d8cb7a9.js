"use strict";(self.webpackChunkfront_financas=self.webpackChunkfront_financas||[]).push([[836],{1836:(w,h,e)=>{e.r(h),e.d(h,{BancoListaModule:()=>I});var m=e(6895),d=e(433),r=e(8654),l=e(4229);const u=[{property:"nomeFormatado",label:"Banco"},{property:"responsavelNome",label:"Respons\xe1vel"},{property:"ativo",label:"Status",type:"cellTemplate"}];var p=e(1969),b=e(790),a=e(4650),g=e(1481),B=e(2686);const f=["tabelaListaBanco"],v=["paginaListaBanco"];function L(o,c){1&o&&(a.TgZ(0,"span",9),a._uU(1,"ATIVO"),a.qZA())}function D(o,c){1&o&&(a.TgZ(0,"span",10),a._uU(1,"INATIVO"),a.qZA())}function T(o,c){if(1&o&&(a.TgZ(0,"div"),a.YNc(1,L,2,0,"span",7),a.YNc(2,D,2,0,"span",8),a.qZA()),2&o){const s=a.oxw().row;a.xp6(1),a.Q6J("ngIf",1==s.ativo),a.xp6(1),a.Q6J("ngIf",0==s.ativo)}}function C(o,c){1&o&&a.YNc(0,T,3,2,"div",6),2&o&&a.Q6J("ngIf","ativo"===c.column.property)}const y=[{path:"",component:(()=>{class o{constructor(s,i,t,n,N){this.router=s,this.titleService=i,this.poNotification=t,this.bancoApiService=n,this.poDialog=N,this.nomePagina=p.k4.label,this.colunasTabelaBanco=u,this.disclaimers=new Array,this.carregandoTabelaBanco=!1,this.carregandoDadosBanco=!1,this.desabilitarCarregarMais=!1,this.acoes=[{label:`Novo ${this.nomePagina}`,action:this.novaBanco.bind(this),icon:"po-icon-plus"}],this.paginacao={page:0},this.bancoListaFilter={action:this.buscar.bind(this),placeholder:"Pesquisar C\xf3digo ou Descri\xe7\xe3o",width:4},this.bancoListaDisclaimer={title:"Filtros",disclaimers:[],remove:this.removerDisclaimer.bind(this),removeAll:this.removerTodosDisclaimer.bind(this)},this.bancoListaAcoes=(0,b.L)(this.editarBanco.bind(this),this.removerBancoDialog.bind(this))}ngOnInit(){this.buscarNovosDados(this.filtroBanco)}ngAfterViewInit(){this.titleService.setTitle(`${this.nomePagina}`)}novaBanco(){this.router.navigate([p.$p.link])}buscar(s){this.carregandoTabelaBanco=!0,this.filtroLista=s,this.limparItensBancos(),this.popularDisclaimers(this.filtroBanco,this.filtroLista),this.buscarNovosDados(this.filtroBanco),this.carregandoTabelaBanco=!1}buscarNovosDados(s){this.limparItensBancos(),this.buscarMaisDados(s)}buscarMaisDados(s){this.filtroBanco=s,this.popularDisclaimers(this.filtroBanco,this.filtroLista);const i=this.criarParametroBanco(this.filtroBanco,this.filtroLista);this.carregandoTabelaBanco=!0,this.bancoApiService.buscarBancos(i,this.paginacao.page).subscribe({next:t=>{this.tabelaListaBanco.sortColumn({}),this.listaBancos=this.listaBancos?[...this.listaBancos,...t.content]:[...t.content],this.desabilitarCarregarMais=t.last},error:({error:t})=>{this.limparItensBancos(),this.poNotification.error(t?.title?t.title:"Erro no servidor"),console.error(t)},complete:()=>{this.carregandoTabelaBanco=!1}})}popularDisclaimers(s,i){this.disclaimers=[],i&&this.disclaimers.push(this.processaFiltroLista(i)),s&&this.disclaimers.push(...this.processaFiltroBancoAvancado(s)),this.bancoListaDisclaimer.disclaimers=this.disclaimers&&this.disclaimers.length>0?[...this.disclaimers]:[]}processaFiltroLista(s){return{label:"Pesquisar: "+s,value:s,property:"filtroLista"}}processaFiltroBancoAvancado(s){return Object.entries(s).filter(i=>Array.isArray(i[1]?.value)?!!i[1].value.length:i[1]?.value).map(i=>({label:i[1].fLabel(i[1]),value:i,property:i[1].property,hideClose:i[1].hideClose}))}criarParametroBanco(s,i){if(s||i)return{nome:s?.nome?.value,pesquisar:i}}limparItensBancos(){this.paginacao.page=0,this.listaBancos=[],this.desabilitarCarregarMais=!0}removerDisclaimer(s){"filtroLista"===s.removedDisclaimer.property&&(this.paginaListaBanco.clearInputSearch(),this.buscar(""))}removerTodosDisclaimer(s){this.paginaListaBanco.clearInputSearch(),this.buscar("")}editarBanco(s){this.router.navigate([(0,p.TY)(s.id).link])}removerBancoDialog(s){this.poDialog.confirm({title:"Aten\xe7\xe3o",message:`Tem certeza que deseja remover a banco?\n      <br>\n      <br> <b>C\xf3digo</b>: ${s.nome||""}`,confirm:()=>this.removerBanco(s)})}removerBanco(s){this.carregandoTabelaBanco=!0,this.bancoApiService.deletarBanco(s.id).subscribe({next:()=>{this.buscarNovosDados(this.filtroBanco),this.poNotification.success("Removido com sucesso")},error:({error:i})=>{this.poNotification.error(i?.detail?i.detail:"Erro no servidor"),console.error(i)},complete:()=>{this.carregandoTabelaBanco=!1}})}mostrarMaisBancos(){this.tabelaListaBanco.sortColumn({}),this.carregandoDadosBanco=!0,this.paginacao.page++,this.carregandoDadosBanco=!1}static#a=this.\u0275fac=function(i){return new(i||o)(a.Y36(l.F0),a.Y36(g.Dx),a.Y36(r.fRI),a.Y36(B.S),a.Y36(r.Aw7))};static#s=this.\u0275cmp=a.Xpm({type:o,selectors:[["app-banco-lista"]],viewQuery:function(i,t){if(1&i&&(a.Gf(f,7),a.Gf(v,7)),2&i){let n;a.iGM(n=a.CRH())&&(t.tabelaListaBanco=n.first),a.iGM(n=a.CRH())&&(t.paginaListaBanco=n.first)}},inputs:{listaBancos:"listaBancos"},decls:6,vars:13,consts:[[3,"p-actions","p-title","p-filter","p-disclaimer-group"],["paginaListaBanco",""],[2,"width","100%"],[2,"width","100%",3,"p-actions","p-sort","p-striped","p-loading","p-loading-show-more","p-show-more-disabled","p-items","p-columns","p-actions-right","p-show-more"],["tabelaListaBanco",""],["p-table-cell-template",""],[4,"ngIf"],["class","po-color-10 po-table-column-label",4,"ngIf"],["class","po-color-07 po-table-column-label",4,"ngIf"],[1,"po-color-10","po-table-column-label"],[1,"po-color-07","po-table-column-label"]],template:function(i,t){1&i&&(a.TgZ(0,"po-page-list",0,1)(2,"po-container",2)(3,"po-table",3,4),a.NdJ("p-show-more",function(){return t.mostrarMaisBancos()}),a.YNc(5,C,1,1,"ng-template",5),a.qZA()()()),2&i&&(a.Q6J("p-actions",t.acoes)("p-title",t.nomePagina)("p-filter",t.bancoListaFilter)("p-disclaimer-group",t.bancoListaDisclaimer),a.xp6(3),a.Q6J("p-actions",t.bancoListaAcoes)("p-sort",!0)("p-striped",!0)("p-loading",t.carregandoTabelaBanco)("p-loading-show-more",t.carregandoDadosBanco)("p-show-more-disabled",t.desabilitarCarregarMais)("p-items",t.listaBancos)("p-columns",t.colunasTabelaBanco)("p-actions-right",!0))},dependencies:[m.O5,r.PJf,r.Ulp,r._w3,r.q5v],encapsulation:2})}return o})()}];let A=(()=>{class o{static#a=this.\u0275fac=function(i){return new(i||o)};static#s=this.\u0275mod=a.oAB({type:o});static#i=this.\u0275inj=a.cJS({imports:[l.Bz.forChild(y),l.Bz]})}return o})(),I=(()=>{class o{static#a=this.\u0275fac=function(i){return new(i||o)};static#s=this.\u0275mod=a.oAB({type:o});static#i=this.\u0275inj=a.cJS({imports:[m.ez,r.JBz,d.UX,A]})}return o})()}}]);