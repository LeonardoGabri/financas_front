"use strict";(self.webpackChunkfront_financas=self.webpackChunkfront_financas||[]).push([[858],{5858:(y,n,o)=>{o.r(n),o.d(n,{SubgrupoListaModule:()=>D});var c=o(6895),g=o(433),u=o(8654),p=o(4229),b=o(790);const h=[{property:"nome",label:"Subgrupo"},{property:"grupoNome",label:"Grupo"}];var l=o(1210),a=o(4650),d=o(1481),m=o(8229);const S=["tabelaListaSubgrupo"],f=["paginaListaSubgrupo"],v=[{path:"",component:(()=>{class t{constructor(i,s,r,e,C){this.router=i,this.titleService=s,this.poNotification=r,this.subgrupoApiService=e,this.poDialog=C,this.nomePagina=l.mw.label,this.colunasTabelaSubgrupo=h,this.disclaimers=new Array,this.carregandoTabelaSubgrupo=!1,this.carregandoDadosSubgrupo=!1,this.desabilitarCarregarMais=!1,this.acoes=[{label:`Novo ${this.nomePagina}`,action:this.novaSubgrupo.bind(this),icon:"po-icon-plus"}],this.paginacao={page:0},this.subgrupoListaFilter={action:this.buscar.bind(this),placeholder:"Pesquisar C\xf3digo ou Descri\xe7\xe3o",width:4},this.subgrupoListaDisclaimer={title:"Filtros",disclaimers:[],remove:this.removerDisclaimer.bind(this),removeAll:this.removerTodosDisclaimer.bind(this)},this.subgrupoListaAcoes=(0,b.L)(this.editarSubgrupo.bind(this),this.removerSubgrupoDialog.bind(this))}ngOnInit(){this.buscarNovosDados(this.filtroSubgrupo)}ngAfterViewInit(){this.titleService.setTitle(`${this.nomePagina}`)}novaSubgrupo(){this.router.navigate([l.cj.link])}buscar(i){this.carregandoTabelaSubgrupo=!0,this.filtroLista=i,this.limparItensSubgrupos(),this.popularDisclaimers(this.filtroSubgrupo,this.filtroLista),this.buscarNovosDados(this.filtroSubgrupo),this.carregandoTabelaSubgrupo=!1}buscarNovosDados(i){this.limparItensSubgrupos(),this.buscarMaisDados(i)}buscarMaisDados(i){this.filtroSubgrupo=i,this.popularDisclaimers(this.filtroSubgrupo,this.filtroLista);const s=this.criarParametroSubgrupo(this.filtroSubgrupo,this.filtroLista);this.carregandoTabelaSubgrupo=!0,this.subgrupoApiService.buscarSubgrupos(s,this.paginacao.page).subscribe({next:r=>{this.tabelaListaSubgrupo.sortColumn({}),this.listaSubgrupos=this.listaSubgrupos?[...this.listaSubgrupos,...r.content]:[...r.content],this.desabilitarCarregarMais=r.last},error:({error:r})=>{this.limparItensSubgrupos(),this.poNotification.error(r?.title?r.title:"Erro no servidor"),console.error(r)},complete:()=>{this.carregandoTabelaSubgrupo=!1}})}popularDisclaimers(i,s){this.disclaimers=[],s&&this.disclaimers.push(this.processaFiltroLista(s)),i&&this.disclaimers.push(...this.processaFiltroSubgrupoAvancado(i)),this.subgrupoListaDisclaimer.disclaimers=this.disclaimers&&this.disclaimers.length>0?[...this.disclaimers]:[]}processaFiltroLista(i){return{label:"Pesquisar: "+i,value:i,property:"filtroLista"}}processaFiltroSubgrupoAvancado(i){return Object.entries(i).filter(s=>Array.isArray(s[1]?.value)?!!s[1].value.length:s[1]?.value).map(s=>({label:s[1].fLabel(s[1]),value:s,property:s[1].property,hideClose:s[1].hideClose}))}criarParametroSubgrupo(i,s){if(i||s)return{nome:i?.nome?.value,pesquisar:s}}limparItensSubgrupos(){this.paginacao.page=0,this.listaSubgrupos=[],this.desabilitarCarregarMais=!0}removerDisclaimer(i){"filtroLista"===i.removedDisclaimer.property&&(this.paginaListaSubgrupo.clearInputSearch(),this.buscar(""))}removerTodosDisclaimer(i){this.paginaListaSubgrupo.clearInputSearch(),this.buscar("")}editarSubgrupo(i){this.router.navigate([(0,l.$d)(i.id).link])}removerSubgrupoDialog(i){this.poDialog.confirm({title:"Aten\xe7\xe3o",message:`Tem certeza que deseja remover a subgrupo?\n      <br>\n      <br> <b>C\xf3digo</b>: ${i.nome||""}`,confirm:()=>this.removerSubgrupo(i)})}removerSubgrupo(i){this.carregandoTabelaSubgrupo=!0,this.subgrupoApiService.deletarSubgrupo(i.id).subscribe({next:()=>{this.buscarNovosDados(this.filtroSubgrupo),this.poNotification.success("Removido com sucesso")},error:({error:s})=>{this.poNotification.error(s?.detail?s.detail:"Erro no servidor"),console.error(s)},complete:()=>{this.carregandoTabelaSubgrupo=!1}})}mostrarMaisSubgrupos(){this.tabelaListaSubgrupo.sortColumn({}),this.carregandoDadosSubgrupo=!0,this.paginacao.page++,this.buscarMaisDados(this.filtroSubgrupo),this.carregandoDadosSubgrupo=!1}static#s=this.\u0275fac=function(s){return new(s||t)(a.Y36(p.F0),a.Y36(d.Dx),a.Y36(u.fRI),a.Y36(m.r),a.Y36(u.Aw7))};static#i=this.\u0275cmp=a.Xpm({type:t,selectors:[["app-subgrupo-lista"]],viewQuery:function(s,r){if(1&s&&(a.Gf(S,7),a.Gf(f,7)),2&s){let e;a.iGM(e=a.CRH())&&(r.tabelaListaSubgrupo=e.first),a.iGM(e=a.CRH())&&(r.paginaListaSubgrupo=e.first)}},inputs:{listaSubgrupos:"listaSubgrupos"},decls:5,vars:13,consts:[[3,"p-actions","p-title","p-filter","p-disclaimer-group"],["paginaListaSubgrupo",""],[2,"width","100%"],[2,"width","100%",3,"p-actions","p-sort","p-striped","p-loading","p-loading-show-more","p-show-more-disabled","p-items","p-columns","p-actions-right","p-show-more"],["tabelaListaSubgrupo",""]],template:function(s,r){1&s&&(a.TgZ(0,"po-page-list",0,1)(2,"po-container",2)(3,"po-table",3,4),a.NdJ("p-show-more",function(){return r.mostrarMaisSubgrupos()}),a.qZA()()()),2&s&&(a.Q6J("p-actions",r.acoes)("p-title",r.nomePagina)("p-filter",r.subgrupoListaFilter)("p-disclaimer-group",r.subgrupoListaDisclaimer),a.xp6(3),a.Q6J("p-actions",r.subgrupoListaAcoes)("p-sort",!0)("p-striped",!0)("p-loading",r.carregandoTabelaSubgrupo)("p-loading-show-more",r.carregandoDadosSubgrupo)("p-show-more-disabled",r.desabilitarCarregarMais)("p-items",r.listaSubgrupos)("p-columns",r.colunasTabelaSubgrupo)("p-actions-right",!0))},dependencies:[u.PJf,u.Ulp,u._w3],encapsulation:2})}return t})()}];let L=(()=>{class t{static#s=this.\u0275fac=function(s){return new(s||t)};static#i=this.\u0275mod=a.oAB({type:t});static#r=this.\u0275inj=a.cJS({imports:[p.Bz.forChild(v),p.Bz]})}return t})(),D=(()=>{class t{static#s=this.\u0275fac=function(s){return new(s||t)};static#i=this.\u0275mod=a.oAB({type:t});static#r=this.\u0275inj=a.cJS({imports:[c.ez,u.JBz,g.UX,L]})}return t})()}}]);