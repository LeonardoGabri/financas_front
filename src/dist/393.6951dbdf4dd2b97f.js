"use strict";(self.webpackChunkfront_financas=self.webpackChunkfront_financas||[]).push([[393],{6232:(w,v,o)=>{o.r(v),o.d(v,{ResponsavelListaModule:()=>I});var h=o(6895),m=o(433),n=o(8654),p=o(4229),d=o(790);const u=[{property:"nome",label:"Respons\xe1vel"},{property:"ativo",label:"Status",type:"cellTemplate"}];var c=o(1037),s=o(4650),R=o(1481),g=o(2210);const f=["tabelaListaResponsavel"],b=["paginaListaResponsavel"];function L(t,r){1&t&&(s.TgZ(0,"span",9),s._uU(1,"ATIVO"),s.qZA())}function D(t,r){1&t&&(s.TgZ(0,"span",10),s._uU(1,"INATIVO"),s.qZA())}function T(t,r){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,L,2,0,"span",7),s.YNc(2,D,2,0,"span",8),s.qZA()),2&t){const e=s.oxw().row;s.xp6(1),s.Q6J("ngIf",1==e.ativo),s.xp6(1),s.Q6J("ngIf",0==e.ativo)}}function C(t,r){1&t&&s.YNc(0,T,3,2,"div",6),2&t&&s.Q6J("ngIf","ativo"===r.column.property)}const A=[{path:"",component:(()=>{class t{constructor(e,a,i,l,N){this.router=e,this.titleService=a,this.poNotification=i,this.responsavelApiService=l,this.poDialog=N,this.nomePagina=c.SN.label,this.colunasTabelaResponsavel=u,this.disclaimers=new Array,this.carregandoTabelaResponsavel=!1,this.carregandoDadosResponsavel=!1,this.desabilitarCarregarMais=!1,this.acoes=[{label:`Novo ${this.nomePagina}`,action:this.novaResponsavel.bind(this),icon:"po-icon-plus"}],this.paginacao={page:0},this.responsavelListaFilter={action:this.buscar.bind(this),placeholder:"Pesquisar C\xf3digo ou Descri\xe7\xe3o",width:4},this.responsavelListaDisclaimer={title:"Filtros",disclaimers:[],remove:this.removerDisclaimer.bind(this),removeAll:this.removerTodosDisclaimer.bind(this)},this.responsavelListaAcoes=(0,d.L)(this.editarResponsavel.bind(this),this.removerResponsavelDialog.bind(this))}ngOnInit(){this.buscarNovosDados(this.filtroResponsavel)}ngAfterViewInit(){this.titleService.setTitle(`${this.nomePagina}`)}novaResponsavel(){this.router.navigate([c.vE.link])}buscar(e){this.carregandoTabelaResponsavel=!0,this.filtroLista=e,this.limparItensResponsavels(),this.popularDisclaimers(this.filtroResponsavel,this.filtroLista),this.buscarNovosDados(this.filtroResponsavel),this.carregandoTabelaResponsavel=!1}buscarNovosDados(e){this.limparItensResponsavels(),this.buscarMaisDados(e)}buscarMaisDados(e){this.filtroResponsavel=e,this.popularDisclaimers(this.filtroResponsavel,this.filtroLista);const a=this.criarParametroResponsavel(this.filtroResponsavel,this.filtroLista);this.carregandoTabelaResponsavel=!0,this.responsavelApiService.buscarResponsavels(a,this.paginacao.page).subscribe({next:i=>{this.tabelaListaResponsavel.sortColumn({}),this.listaResponsavels=this.listaResponsavels?[...this.listaResponsavels,...i.content]:[...i.content],this.desabilitarCarregarMais=i.last},error:({error:i})=>{this.limparItensResponsavels(),this.poNotification.error(i?.title?i.title:"Erro no servidor"),console.error(i)},complete:()=>{this.carregandoTabelaResponsavel=!1}})}popularDisclaimers(e,a){this.disclaimers=[],a&&this.disclaimers.push(this.processaFiltroLista(a)),e&&this.disclaimers.push(...this.processaFiltroResponsavelAvancado(e)),this.responsavelListaDisclaimer.disclaimers=this.disclaimers&&this.disclaimers.length>0?[...this.disclaimers]:[]}processaFiltroLista(e){return{label:"Pesquisar: "+e,value:e,property:"filtroLista"}}processaFiltroResponsavelAvancado(e){return Object.entries(e).filter(a=>Array.isArray(a[1]?.value)?!!a[1].value.length:a[1]?.value).map(a=>({label:a[1].fLabel(a[1]),value:a,property:a[1].property,hideClose:a[1].hideClose}))}criarParametroResponsavel(e,a){if(e||a)return{nome:e?.nome?.value,pesquisar:a}}limparItensResponsavels(){this.paginacao.page=0,this.listaResponsavels=[],this.desabilitarCarregarMais=!0}removerDisclaimer(e){"filtroLista"===e.removedDisclaimer.property&&(this.paginaListaResponsavel.clearInputSearch(),this.buscar(""))}removerTodosDisclaimer(e){this.paginaListaResponsavel.clearInputSearch(),this.buscar("")}editarResponsavel(e){this.router.navigate([(0,c.nf)(e.id).link])}removerResponsavelDialog(e){this.poDialog.confirm({title:"Aten\xe7\xe3o",message:`Tem certeza que deseja remover a responsavel?\n      <br>\n      <br> <b>C\xf3digo</b>: ${e.nome||""}`,confirm:()=>this.removerResponsavel(e)})}removerResponsavel(e){this.carregandoTabelaResponsavel=!0,this.responsavelApiService.deletarResponsavel(e.id).subscribe({next:()=>{this.buscarNovosDados(this.filtroResponsavel),this.poNotification.success("Removido com sucesso")},error:({error:a})=>{this.poNotification.error(a?.detail?a.detail:"Erro no servidor"),console.error(a)},complete:()=>{this.carregandoTabelaResponsavel=!1}})}mostrarMaisResponsavels(){this.tabelaListaResponsavel.sortColumn({}),this.carregandoDadosResponsavel=!0,this.paginacao.page++,this.carregandoDadosResponsavel=!1}static#s=this.\u0275fac=function(a){return new(a||t)(s.Y36(p.F0),s.Y36(R.Dx),s.Y36(n.fRI),s.Y36(g.s),s.Y36(n.Aw7))};static#e=this.\u0275cmp=s.Xpm({type:t,selectors:[["app-responsavel-lista"]],viewQuery:function(a,i){if(1&a&&(s.Gf(f,7),s.Gf(b,7)),2&a){let l;s.iGM(l=s.CRH())&&(i.tabelaListaResponsavel=l.first),s.iGM(l=s.CRH())&&(i.paginaListaResponsavel=l.first)}},inputs:{listaResponsavels:"listaResponsavels"},decls:6,vars:13,consts:[[3,"p-actions","p-title","p-filter","p-disclaimer-group"],["paginaListaResponsavel",""],[2,"width","100%"],[2,"width","100%",3,"p-actions","p-sort","p-striped","p-loading","p-loading-show-more","p-show-more-disabled","p-items","p-columns","p-actions-right","p-show-more"],["tabelaListaResponsavel",""],["p-table-cell-template",""],[4,"ngIf"],["class","po-color-10 po-table-column-label",4,"ngIf"],["class","po-color-07 po-table-column-label",4,"ngIf"],[1,"po-color-10","po-table-column-label"],[1,"po-color-07","po-table-column-label"]],template:function(a,i){1&a&&(s.TgZ(0,"po-page-list",0,1)(2,"po-container",2)(3,"po-table",3,4),s.NdJ("p-show-more",function(){return i.mostrarMaisResponsavels()}),s.YNc(5,C,1,1,"ng-template",5),s.qZA()()()),2&a&&(s.Q6J("p-actions",i.acoes)("p-title",i.nomePagina)("p-filter",i.responsavelListaFilter)("p-disclaimer-group",i.responsavelListaDisclaimer),s.xp6(3),s.Q6J("p-actions",i.responsavelListaAcoes)("p-sort",!0)("p-striped",!0)("p-loading",i.carregandoTabelaResponsavel)("p-loading-show-more",i.carregandoDadosResponsavel)("p-show-more-disabled",i.desabilitarCarregarMais)("p-items",i.listaResponsavels)("p-columns",i.colunasTabelaResponsavel)("p-actions-right",!0))},dependencies:[h.O5,n.PJf,n.Ulp,n._w3,n.q5v],encapsulation:2})}return t})()}];let y=(()=>{class t{static#s=this.\u0275fac=function(a){return new(a||t)};static#e=this.\u0275mod=s.oAB({type:t});static#a=this.\u0275inj=s.cJS({imports:[p.Bz.forChild(A),p.Bz]})}return t})(),I=(()=>{class t{static#s=this.\u0275fac=function(a){return new(a||t)};static#e=this.\u0275mod=s.oAB({type:t});static#a=this.\u0275inj=s.cJS({imports:[h.ez,n.JBz,m.UX,y]})}return t})()}}]);